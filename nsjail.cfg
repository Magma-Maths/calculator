name: "magma-sandbox"
description: "Sandbox for Magma calculator execution"

mode: ONCE
time_limit: 0
rlimit_as_type: SOFT
rlimit_cpu_type: SOFT

uidmap {
    inside_id: "calculator"
    outside_id: "calculator"
}
gidmap {
    inside_id: "calculator"
    outside_id: "calculator"
}

clone_newnet: true
clone_newpid: true
clone_newns: true
clone_newuts: true

mount {
    src: "/opt/magma"
    dst: "/opt/magma"
    is_bind: true
    rw: false
}
mount {
    dst: "/tmp"
    fstype: "tmpfs"
    rw: true
    options: "size=67108864"
}
mount {
    src: "/usr/lib"
    dst: "/usr/lib"
    is_bind: true
    rw: false
}
mount {
    src: "/lib"
    dst: "/lib"
    is_bind: true
    rw: false
}
mount {
    src: "/lib64"
    dst: "/lib64"
    is_bind: true
    rw: false
    mandatory: false
}
mount {
    src: "/etc/ld.so.cache"
    dst: "/etc/ld.so.cache"
    is_bind: true
    rw: false
    mandatory: false
}

envar: "PATH=/opt/magma/bin:/usr/bin:/bin"
envar: "HOME=/tmp"

keep_env: false
